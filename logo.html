<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>siKKmiXX scratch overlap logo</title>
  <style>
    :root{
      --bg:#000;
      --stroke: rgba(255,255,255,.12);
      --pink:#ff00cc;
      --blue:#3333ff;
      --cyan:#00e0ff;
      --glowPink: 0 0 10px rgba(255,0,204,.75), 0 0 22px rgba(255,0,204,.35);
      --glowCyan: 0 0 10px rgba(0,224,255,.60), 0 0 22px rgba(0,224,255,.28);
    }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background: var(--bg);
      color:#fff;
      font-family:"Segoe UI", system-ui, -apple-system, Arial, sans-serif;
    }

    #sikkmixx-logo{
      position:relative;
      width:min(640px, 94vw);
      aspect-ratio: 3 / 1.35;
      display:grid;
      place-items:center;
      user-select:none;
    }

    .deck{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 0;
    }

    .disc{
      position:relative;
      width: 46%;
      aspect-ratio:1/1;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,.14), transparent 52%),
        radial-gradient(circle at 70% 70%, rgba(0,224,255,.10), transparent 55%),
        rgba(18,18,18,.55);
      backdrop-filter: blur(14px);
      box-shadow: 0 0 45px rgba(255,0,204,.16);
      display:grid;
      place-items:center;
      overflow: visible; /* allow KK/XX outside */
      transform-origin: 50% 50%;
      will-change: transform;
    }

    .disc::before{
      content:"";
      position:absolute;
      inset:-12%;
      border-radius:999px;
      background:
        repeating-radial-gradient(circle,
          rgba(255,255,255,.08) 0 1px,
          rgba(0,0,0,0) 1px 7px);
      opacity:.22;
      pointer-events:none;
      filter: blur(.2px);
    }

    .disc::after{
      content:"";
      position:absolute;
      width: 10%;
      aspect-ratio:1/1;
      border-radius:999px;
      background: radial-gradient(circle, rgba(255,255,255,.9), rgba(255,255,255,.2));
      opacity:.22;
      pointer-events:none;
    }

    /* Discs overlap */
    .disc.left  { transform: translateX(14%); z-index: 2; }
    .disc.right { transform: translateX(-14%); z-index: 1; }

    /* Rotating layer */
    .spin{
      position:relative;
      width: 100%;
      height: 100%;
      transform-origin: 50% 50%;
      will-change: transform;
      display:grid;
      place-items:center;
      pointer-events:none;
    }

    .base{
      font-weight: 800;
      letter-spacing: 1px;
      font-size: clamp(22px, 4.2vw, 44px);
      opacity: .92;
      color: rgba(255,255,255,.88);
      text-shadow: 0 0 12px rgba(255,255,255,.12);
      filter: drop-shadow(0 0 10px rgba(0,0,0,.6));
    }

    .rim{
      position:absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-weight: 900;
      letter-spacing: 1px;
      font-size: clamp(56px, 10.5vw, 118px);
      line-height: 1;
      background: linear-gradient(90deg, var(--pink), var(--blue));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: var(--glowPink);
      filter: drop-shadow(0 0 14px rgba(255,0,204,.35));
      will-change: transform, filter;
    }

    .disc.left .rim  { transform: translate(-50%, -50%) translateX(55%) translateY(-2%); }
    .disc.right .rim { transform: translate(-50%, -50%) translateX(-55%) translateY(-2%); }

    /* ---------- SCRATCH HIT ANIMATIONS ---------- */

    /* record “scratch”: tiny forward/back rotation + micro shove */
    .scratchRecord{
      animation: scratchRecord 260ms ease-out 1;
    }

    @keyframes scratchRecord{
      0%   { filter: none; }
      10%  { transform: translateX(var(--tx)) rotate(6deg); filter: brightness(1.05) saturate(1.1); }
      25%  { transform: translateX(var(--tx)) rotate(-7deg); }
      45%  { transform: translateX(var(--tx)) rotate(5deg); }
      70%  { transform: translateX(var(--tx)) rotate(-3deg); }
      100% { transform: translateX(var(--tx)) rotate(0deg); }
    }

    /* letters “vibrate” like scratch chatter */
    .scratchLetters{
      animation: scratchLetters 260ms linear 1;
    }

    @keyframes scratchLetters{
      0%   { transform: translate(var(--baseX), var(--baseY)) scale(1); }
      10%  { transform: translate(calc(var(--baseX) + 2px), calc(var(--baseY) - 1px)) scale(1.03); }
      20%  { transform: translate(calc(var(--baseX) - 3px), calc(var(--baseY) + 2px)) scale(0.99); }
      30%  { transform: translate(calc(var(--baseX) + 3px), calc(var(--baseY) - 2px)) scale(1.02); }
      40%  { transform: translate(calc(var(--baseX) - 2px), calc(var(--baseY) + 1px)) scale(1.00); }
      55%  { transform: translate(calc(var(--baseX) + 2px), calc(var(--baseY) + 0px)) scale(1.01); }
      70%  { transform: translate(calc(var(--baseX) - 1px), calc(var(--baseY) - 1px)) scale(1.00); }
      100% { transform: translate(var(--baseX), var(--baseY)) scale(1); }
    }

    /* optional center spark can stay subtle */
    .spark{
      position:absolute;
      left:50%;
      top:50%;
      width: 16%;
      aspect-ratio:1/1;
      transform: translate(-50%, -50%);
      border-radius:999px;
      background: radial-gradient(circle, rgba(255,0,204,.8), rgba(0,224,255,.25), transparent 70%);
      opacity:0;
      pointer-events:none;
      z-index: 50;
    }

    .sparkOn{
      opacity:1;
      animation: spark 220ms ease-out 1;
    }

    @keyframes spark{
      0%   { transform: translate(-50%, -50%) scale(.85); opacity:0; }
      35%  { transform: translate(-50%, -50%) scale(1.1); opacity:1; }
      100% { transform: translate(-50%, -50%) scale(1.55); opacity:0; }
    }

    @media (prefers-reduced-motion: reduce){
      .spin{ transform:none !important; }
      .scratchRecord, .scratchLetters { animation: none !important; }
    }
  </style>
</head>

<body>

<div id="sikkmixx-logo" aria-label="siKKmiXX logo">
  <div class="deck">
    <div class="disc left" id="discLeft">
      <div class="spin" id="spinLeft">
        <div class="base">si</div>
        <div class="rim" id="rimKK">KK</div>
      </div>
    </div>

    <div class="disc right" id="discRight">
      <div class="spin" id="spinRight">
        <div class="base">mi</div>
        <div class="rim" id="rimXX">XX</div>
      </div>
    </div>

    <div class="spark" id="spark"></div>
  </div>
</div>

<script>
  // --- Tunables ---
  const SPEED_DEG_PER_SEC = 44;     // base spin speed
  const FLASH_THRESHOLD_DEG = 6;    // match sensitivity
  const HIT_COOLDOWN_MS = 320;      // scratch cooldown

  let isPlaying = true;

  const spinLeft  = document.getElementById("spinLeft");
  const spinRight = document.getElementById("spinRight");
  const discLeft  = document.getElementById("discLeft");
  const discRight = document.getElementById("discRight");

  const rimKK = document.getElementById("rimKK");
  const rimXX = document.getElementById("rimXX");
  const spark = document.getElementById("spark");
  const logo  = document.getElementById("sikkmixx-logo");

  // Precompute the base translate values for the letters so the vibration keyframes can reuse them
  rimKK.style.setProperty("--baseX", "calc(-50% + 55%)");
  rimKK.style.setProperty("--baseY", "calc(-50% - 2%)");
  rimXX.style.setProperty("--baseX", "calc(-50% - 55%)");
  rimXX.style.setProperty("--baseY", "calc(-50% - 2%)");

  // Also set record translate for scratch animation (keep their overlap position)
  discLeft.style.setProperty("--tx", "14%");
  discRight.style.setProperty("--tx", "-14%");

  let lastHitAt = 0;
  const t0 = performance.now();

  function normDeg(d){
    d = d % 360;
    return d < 0 ? d + 360 : d;
  }

  function shortestAngleDiff(a, b){
    let diff = Math.abs(normDeg(a) - normDeg(b));
    return diff > 180 ? 360 - diff : diff;
  }

  function triggerScratch(){
    // record scratch hit (both discs)
    discLeft.classList.add("scratchRecord");
    discRight.classList.add("scratchRecord");

    // letter vibration (just the hot letters)
    rimKK.classList.add("scratchLetters");
    rimXX.classList.add("scratchLetters");

    // optional subtle spark
    spark.classList.add("sparkOn");

    setTimeout(() => {
      discLeft.classList.remove("scratchRecord");
      discRight.classList.remove("scratchRecord");
      rimKK.classList.remove("scratchLetters");
      rimXX.classList.remove("scratchLetters");
      spark.classList.remove("sparkOn");
    }, 280);
  }

  function tick(now){
    const dt = (now - t0) / 1000;

    if (isPlaying && !matchMedia("(prefers-reduced-motion: reduce)").matches){
      const aRight = normDeg(dt * SPEED_DEG_PER_SEC);
      const aLeft  = normDeg(-dt * SPEED_DEG_PER_SEC);

      spinRight.style.transform = `rotate(${aRight}deg)`;
      spinLeft.style.transform  = `rotate(${aLeft}deg)`;

      const relative = shortestAngleDiff(aRight, aLeft);
      const nowMs = performance.now();

      if (relative <= FLASH_THRESHOLD_DEG && (nowMs - lastHitAt) > HIT_COOLDOWN_MS) {
        lastHitAt = nowMs;
        triggerScratch();
      }
    }

    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  // demo toggle (click logo to pause/play)
  logo.addEventListener("click", () => { isPlaying = !isPlaying; });
</script>

</body>
</html>
